<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Introduction - ROUP Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Rust-based OpenMP/OpenACC Unified Parser - Safe, fast, and extensible">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ROUP Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ouankou/roup" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/ouankou/roup/edit/main/docs/book/src/intro.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="roup"><a class="header" href="#roup">ROUP</a></h1>
<div align="center">
<p><strong>Rust-based OpenMP Parser</strong></p>
<p><em>Safe, fast, and comprehensive OpenMP directive parsing</em></p>
<p><a href="./getting-started.html">Get Started</a> Â· <a href="./rust-tutorial.html">Tutorials</a> Â· <a href="./api-reference.html">API Reference</a> Â· <a href="https://github.com/ouankou/roup">GitHub</a></p>
</div>
<hr />
<h2 id="what-is-roup"><a class="header" href="#what-is-roup">What is ROUP?</a></h2>
<p>ROUP is an <strong>experimental</strong> parser for OpenMP directives, written in safe Rust with C and C++ APIs. Parse OpenMP pragmas like <code>#pragma omp parallel for</code> into structured data that your tools can analyze, transform, and process.</p>
<blockquote>
<p><strong>âš ï¸ Experimental Status</strong>: ROUP is under active development and not yet production-ready. APIs may change, and some OpenMP features are still being implemented. Use in research and experimental projects.</p>
</blockquote>
<p><strong>Perfect for:</strong></p>
<ul>
<li>ğŸ”§ <strong>Compiler research</strong> - Experiment with OpenMP parsing in compilers</li>
<li>ğŸ” <strong>Analysis prototypes</strong> - Build experimental linters and analyzers</li>
<li>ğŸ“ <strong>Researchers</strong> - Study parallelization patterns and test new ideas</li>
<li>ğŸ“š <strong>Educators</strong> - Teaching tool for parallel programming concepts</li>
</ul>
<hr />
<h2 id="why-roup"><a class="header" href="#why-roup">Why ROUP?</a></h2>
<h3 id="-fast--lightweight"><a class="header" href="#-fast--lightweight">ğŸš€ Fast &amp; Lightweight</a></h3>
<ul>
<li><strong>Microsecond parsing</strong> - Parse directives in ~500ns</li>
<li><strong>Zero-copy lexer</strong> - Minimal memory allocations</li>
<li><strong>No LLVM dependency</strong> - Standalone library, small binary size</li>
<li><strong>16 FFI functions</strong> - Simple, focused C API</li>
</ul>
<h3 id="-safe--reliable"><a class="header" href="#-safe--reliable">ğŸ›¡ï¸ Safe &amp; Reliable</a></h3>
<ul>
<li><strong>99.1% safe Rust</strong> - Memory safety guaranteed</li>
<li><strong>352 passing tests</strong> - Comprehensive test coverage</li>
<li><strong>Fuzzing tested</strong> - Handles malformed input gracefully</li>
<li><strong>NULL-safe C API</strong> - Defensive checks at FFI boundary</li>
</ul>
<h3 id="-comprehensive-openmp-support"><a class="header" href="#-comprehensive-openmp-support">ğŸ“š Comprehensive OpenMP Support</a></h3>
<ul>
<li><strong>95 directives</strong> - From <code>parallel</code> to <code>metadirective</code></li>
<li><strong>91 clauses</strong> - Extensive OpenMP 3.0 through 6.0 coverage</li>
<li><strong>Version tracking</strong> - Know which OpenMP version introduced each feature</li>
<li><strong>Spec compliant</strong> - Follows official OpenMP specifications</li>
</ul>
<h3 id="-multi-language-apis"><a class="header" href="#-multi-language-apis">ğŸ”Œ Multi-Language APIs</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Language</th><th>API Style</th><th>Memory Management</th><th>Status</th></tr></thead><tbody>
<tr><td><strong>Rust</strong></td><td>Native</td><td>Automatic (ownership)</td><td>âœ… Stable</td></tr>
<tr><td><strong>C</strong></td><td>Pointer-based</td><td>Manual (malloc/free pattern)</td><td>âœ… Stable</td></tr>
<tr><td><strong>C++</strong></td><td>RAII wrappers</td><td>Automatic (destructors)</td><td>âœ… Stable</td></tr>
<tr><td><strong>Fortran</strong></td><td>C interop</td><td>Manual (via iso_c_binding)</td><td>âš ï¸ Experimental</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="quick-example"><a class="header" href="#quick-example">Quick Example</a></h2>
<h3 id="parse-in-3-lines-rust"><a class="header" href="#parse-in-3-lines-rust">Parse in 3 Lines (Rust)</a></h3>
<pre><code class="language-rust">use roup::parser::openmp;

let parser = openmp::parser();
let (_, directive) = parser.parse("#pragma omp parallel for num_threads(4)").unwrap();
// Access directive information
println!("Directive: {}", directive.name);  // Output: Directive: parallel for
println!("Found {} clauses", directive.clauses.len());  // Output: Found 1 clauses
// Iterate through clauses
for clause in &amp;directive.clauses {
    println!("  Clause: {}", clause.name);  // Output:   Clause: num_threads
}</code></pre>
<h3 id="parse-in-c"><a class="header" href="#parse-in-c">Parse in C</a></h3>
<pre><code class="language-c">OmpDirective* dir = roup_parse("#pragma omp parallel for num_threads(4)");
printf("Clauses: %d\n", roup_directive_clause_count(dir));
roup_directive_free(dir);
</code></pre>
<h3 id="parse-in-c-with-raii"><a class="header" href="#parse-in-c-with-raii">Parse in C++ (with RAII)</a></h3>
<pre><code class="language-cpp">roup::Directive dir("#pragma omp parallel for num_threads(4)");
std::cout &lt;&lt; "Clauses: " &lt;&lt; dir.clause_count() &lt;&lt; "\n";
// Automatic cleanup!
</code></pre>
<h3 id="parse-fortran-experimental"><a class="header" href="#parse-fortran-experimental">Parse Fortran (Experimental)</a></h3>
<pre><code class="language-fortran">! Free-form Fortran
directive_ptr = roup_parse_with_language("!$OMP PARALLEL PRIVATE(A)", &amp;
                                          ROUP_LANG_FORTRAN_FREE)
</code></pre>
<p><a href="./getting-started.html">See full examples â†’</a></p>
<hr />
<h2 id="feature-highlights"><a class="header" href="#feature-highlights">Feature Highlights</a></h2>
<h3 id="-comprehensive-coverage"><a class="header" href="#-comprehensive-coverage">ğŸ¯ Comprehensive Coverage</a></h3>
<details>
<summary><b>Parallel Constructs</b> - 20+ directives</summary>
<ul>
<li><code>parallel</code> - Basic parallel regions</li>
<li><code>parallel for</code> - Combined parallel + worksharing</li>
<li><code>parallel sections</code> - Parallel sections</li>
<li><code>parallel master</code> - Parallel master thread</li>
<li><code>parallel loop</code> - OpenMP 5.0+ parallel loop</li>
<li>And more...</li>
</ul>
</details>
<details>
<summary><b>Work-Sharing</b> - 10+ directives</summary>
<ul>
<li><code>for</code> / <code>do</code> - Loop worksharing</li>
<li><code>sections</code> / <code>section</code> - Code sections</li>
<li><code>single</code> - Execute once</li>
<li><code>workshare</code> - Fortran worksharing</li>
<li><code>loop</code> - Generic loop construct</li>
</ul>
</details>
<details>
<summary><b>Tasking</b> - 15+ directives</summary>
<ul>
<li><code>task</code> - Explicit tasks</li>
<li><code>taskloop</code> - Loop-based tasks</li>
<li><code>taskgroup</code> - Task synchronization</li>
<li><code>taskwait</code> - Wait for tasks</li>
<li><code>taskyield</code> - Yield to other tasks</li>
<li>Dependency clauses: <code>depend</code>, <code>priority</code>, <code>detach</code></li>
</ul>
</details>
<details>
<summary><b>Device Offloading</b> - 25+ directives</summary>
<ul>
<li><code>target</code> - Offload to device</li>
<li><code>target data</code> - Device data management</li>
<li><code>target enter/exit data</code> - Data transfer</li>
<li><code>target update</code> - Synchronize data</li>
<li><code>teams</code> - Multiple thread teams</li>
<li><code>distribute</code> - Distribute iterations</li>
</ul>
</details>
<details>
<summary><b>SIMD</b> - 10+ directives</summary>
<ul>
<li><code>simd</code> - SIMD loops</li>
<li><code>declare simd</code> - Vectorizable functions</li>
<li><code>distribute simd</code> - Combined distribute + SIMD</li>
<li>Various alignment and vectorization clauses</li>
</ul>
</details>
<details>
<summary><b>Advanced (OpenMP 5.0+)</b></summary>
<ul>
<li><code>metadirective</code> - Context-sensitive directives</li>
<li><code>declare variant</code> - Function variants</li>
<li><code>loop</code> - Generic loop construct</li>
<li><code>scan</code> - Prefix scan operations</li>
<li><code>assume</code> - Compiler assumptions</li>
</ul>
</details>
<p><a href="./openmp-support.html">Full OpenMP Support Matrix â†’</a></p>
<h3 id="-rich-clause-support"><a class="header" href="#-rich-clause-support">ğŸ” Rich Clause Support</a></h3>
<p><strong>92+ clause types including:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Category</th><th>Clauses</th></tr></thead><tbody>
<tr><td><strong>Data Sharing</strong></td><td><code>private</code>, <code>shared</code>, <code>firstprivate</code>, <code>lastprivate</code></td></tr>
<tr><td><strong>Reductions</strong></td><td><code>reduction(+:x)</code>, <code>reduction(min:y)</code>, custom operators</td></tr>
<tr><td><strong>Scheduling</strong></td><td><code>schedule(static)</code>, <code>schedule(dynamic,100)</code>, <code>collapse(3)</code></td></tr>
<tr><td><strong>Control</strong></td><td><code>if(condition)</code>, <code>num_threads(8)</code>, <code>proc_bind(close)</code></td></tr>
<tr><td><strong>Device</strong></td><td><code>map(to:x)</code>, <code>device(2)</code>, <code>defaultmap(tofrom:scalar)</code></td></tr>
<tr><td><strong>Dependencies</strong></td><td><code>depend(in:x)</code>, <code>depend(out:y)</code>, <code>depend(inout:z)</code></td></tr>
</tbody></table>
</div>
<p><a href="./api-reference.html">Complete clause reference â†’</a></p>
<hr />
<h2 id="architecture"><a class="header" href="#architecture">Architecture</a></h2>
<pre><code class="language-text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Your Application                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Language Bindings                 â”‚
â”‚   â”œâ”€ Rust API (native)              â”‚
â”‚   â”œâ”€ C API (16 functions)           â”‚
â”‚   â””â”€ C++ API (RAII wrappers)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Parser Layer (100% safe Rust)    â”‚
â”‚   â”œâ”€ Directive Parser               â”‚
â”‚   â”œâ”€ Clause Parser                  â”‚
â”‚   â””â”€ Error Recovery                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Lexer (nom-based, zero-copy)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>Design Principles:</strong></p>
<ul>
<li><strong>Safety first</strong> - Rust ownership prevents memory bugs</li>
<li><strong>Zero-copy</strong> - Parse directly from input string</li>
<li><strong>Minimal FFI</strong> - Only ~60 lines of unsafe code (0.9%)</li>
<li><strong>Extensible</strong> - Easy to add new directives/clauses</li>
</ul>
<p><a href="./architecture.html">Learn more about the architecture â†’</a></p>
<hr />
<h2 id="comparison"><a class="header" href="#comparison">Comparison</a></h2>
<h3 id="roup-vs-llvmclang"><a class="header" href="#roup-vs-llvmclang">ROUP vs LLVM/Clang</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>ROUP</th><th>LLVM/Clang</th></tr></thead><tbody>
<tr><td><strong>Purpose</strong></td><td>OpenMP parsing only</td><td>Full C/C++ compiler</td></tr>
<tr><td><strong>Binary size</strong></td><td>~500KB</td><td>~50MB+</td></tr>
<tr><td><strong>Parse time</strong></td><td>~500ns - 1Âµs</td><td>~10-100Âµs</td></tr>
<tr><td><strong>Dependencies</strong></td><td>None</td><td>LLVM, Clang, libc++</td></tr>
<tr><td><strong>API complexity</strong></td><td>16 C functions</td><td>1000s of functions</td></tr>
<tr><td><strong>Learning curve</strong></td><td>Minutes</td><td>Weeks</td></tr>
<tr><td><strong>Use case</strong></td><td>Analysis, tools, IDE plugins</td><td>Compilation</td></tr>
</tbody></table>
</div>
<p><strong>Use ROUP when:</strong></p>
<ul>
<li>âœ… You only need to parse OpenMP, not compile</li>
<li>âœ… You want minimal dependencies</li>
<li>âœ… You need fast integration into tools</li>
<li>âœ… You value simplicity and safety</li>
</ul>
<p><strong>Use LLVM when:</strong></p>
<ul>
<li>You need full C/C++ compilation</li>
<li>You're building a complete compiler</li>
<li>You need LLVM IR generation</li>
</ul>
<h3 id="roup-vs-custom-parser"><a class="header" href="#roup-vs-custom-parser">ROUP vs Custom Parser</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Aspect</th><th>ROUP</th><th>Custom Parser</th></tr></thead><tbody>
<tr><td><strong>Development time</strong></td><td>Minutes (add dependency)</td><td>Weeks/months</td></tr>
<tr><td><strong>OpenMP coverage</strong></td><td>120+ directives</td><td>You must implement all</td></tr>
<tr><td><strong>Testing</strong></td><td>342 tests included</td><td>You must write tests</td></tr>
<tr><td><strong>Maintenance</strong></td><td>Active, updated for new OpenMP</td><td>You must maintain</td></tr>
<tr><td><strong>Edge cases</strong></td><td>Handled (fuzzing tested)</td><td>Likely has bugs</td></tr>
<tr><td><strong>Spec compliance</strong></td><td>Verified</td><td>Uncertain</td></tr>
</tbody></table>
</div>
<p><strong>Verdict:</strong> Unless you have very specific needs, use ROUP.</p>
<hr />
<h2 id="safety-guarantees"><a class="header" href="#safety-guarantees">Safety Guarantees</a></h2>
<p>ROUP prioritizes safety without compromising usability:</p>
<h3 id="memory-safety"><a class="header" href="#memory-safety">Memory Safety</a></h3>
<ul>
<li>âœ… <strong>No buffer overflows</strong> - Rust prevents at compile time</li>
<li>âœ… <strong>No use-after-free</strong> - Ownership system enforces</li>
<li>âœ… <strong>No double-free</strong> - Checked at FFI boundary</li>
<li>âœ… <strong>No memory leaks</strong> - RAII and destructors</li>
<li>âœ… <strong>No data races</strong> - Thread-safe parsing</li>
</ul>
<h3 id="api-safety"><a class="header" href="#api-safety">API Safety</a></h3>
<p><strong>Rust API:</strong></p>
<ul>
<li>100% memory-safe by construction</li>
<li>Impossible to trigger undefined behavior</li>
</ul>
<p><strong>C API:</strong></p>
<ul>
<li>NULL checks before all pointer operations</li>
<li>Returns safe defaults on error (-1, NULL)</li>
<li>Validates UTF-8 encoding</li>
<li>Documents all safety contracts</li>
</ul>
<h3 id="testing"><a class="header" href="#testing">Testing</a></h3>
<ul>
<li><strong>342 tests</strong> covering all features</li>
<li><strong>Fuzzing</strong> with random inputs</li>
<li><strong>Valgrind</strong> verified (no leaks)</li>
<li><strong>Thread sanitizer</strong> verified (no races)</li>
<li><strong>Address sanitizer</strong> verified (no memory errors)</li>
</ul>
<p><a href="./architecture.html#safety-boundaries">Read the safety analysis â†’</a></p>
<hr />
<h2 id="performance"><a class="header" href="#performance">Performance</a></h2>
<p>Typical performance characteristics:</p>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time</th><th>Notes</th></tr></thead><tbody>
<tr><td>Parse <code>#pragma omp parallel</code></td><td>~500ns</td><td>Simple directive</td></tr>
<tr><td>Parse with clauses</td><td>~800ns</td><td><code>num_threads(4)</code></td></tr>
<tr><td>Complex directive</td><td>~1.2Âµs</td><td>Multiple clauses</td></tr>
<tr><td>Iterator creation</td><td>~10ns</td><td>FFI overhead</td></tr>
</tbody></table>
</div>
<p><strong>Scalability:</strong></p>
<ul>
<li>âœ… Thread-safe - Parse from multiple threads</li>
<li>âœ… Zero-copy - No string allocations during lexing</li>
<li>âœ… Minimal allocations - ~3 allocations per directive</li>
<li>âœ… Fast enough - Parsing is rarely the bottleneck</li>
</ul>
<p><a href="./architecture.html#performance-characteristics">Performance details â†’</a></p>
<hr />
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>Choose your language:</p>
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
<div style="padding: 1rem; border: 1px solid #ddd; border-radius: 4px;">
<h3 id="-rust"><a class="header" href="#-rust">ğŸ¦€ Rust</a></h3>
<p><strong>Install:</strong></p>
<pre><code class="language-toml">[dependencies]
roup = "0.1"
</code></pre>
<p><strong>Learn:</strong></p>
<ul>
<li><a href="./rust-tutorial.html">Rust Tutorial</a></li>
<li><a href="./api-reference.html">API Docs</a></li>
</ul>
</div>
<div style="padding: 1rem; border: 1px solid #ddd; border-radius: 4px;">
<h3 id="-c"><a class="header" href="#-c">ğŸ”§ C</a></h3>
<p><strong>Build:</strong></p>
<pre><code class="language-bash">cargo build --release
</code></pre>
<p><strong>Learn:</strong></p>
<ul>
<li><a href="./c-tutorial.html">C Tutorial</a></li>
<li><a href="./building.html">Building Guide</a></li>
</ul>
</div>
<div style="padding: 1rem; border: 1px solid #ddd; border-radius: 4px;">
<h3 id="-c-1"><a class="header" href="#-c-1">âš™ï¸ C++</a></h3>
<p><strong>Build:</strong></p>
<pre><code class="language-bash">cargo build --release
</code></pre>
<p><strong>Learn:</strong></p>
<ul>
<li><a href="./cpp-tutorial.html">C++ Tutorial</a></li>
<li><a href="./cpp-tutorial.html#step-2-create-raii-wrappers-modern-c">RAII Wrappers</a></li>
</ul>
</div>
</div>
<p><a href="./getting-started.html">Quick Start Guide â†’</a></p>
<hr />
<h2 id="community"><a class="header" href="#community">Community</a></h2>
<ul>
<li><strong>GitHub</strong>: <a href="https://github.com/ouankou/roup">ouankou/roup</a></li>
<li><strong>Issues</strong>: <a href="https://github.com/ouankou/roup/issues">Bug reports</a></li>
<li><strong>Discussions</strong>: <a href="https://github.com/ouankou/roup/discussions">Questions &amp; ideas</a></li>
<li><strong>Contributing</strong>: <a href="./contributing.html">How to contribute</a></li>
</ul>
<hr />
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>ROUP is open source under the <strong>MIT License</strong>.</p>
<p>Copyright Â© 2024-2025 Anjia Wang</p>
<hr />
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ul>
<li>ğŸ“– <a href="./getting-started.html">Read the Getting Started guide</a></li>
<li>ğŸ¦€ <a href="./rust-tutorial.html">Try the Rust tutorial</a></li>
<li>ğŸ”§ <a href="./c-tutorial.html">Try the C tutorial</a></li>
<li>ğŸ“š <a href="./api-reference.html">Browse the API reference</a></li>
<li>ğŸ—ï¸ <a href="./architecture.html">Learn the architecture</a></li>
<li>â“ <a href="./faq.html">Check the FAQ</a></li>
</ul>
<hr />
<h2 id="why-roup-1"><a class="header" href="#why-roup-1">Why ROUP?</a></h2>
<h3 id="for-compiler-developers"><a class="header" href="#for-compiler-developers">For Compiler Developers</a></h3>
<ul>
<li>Drop-in OpenMP/OpenACC parser component</li>
<li>Well-tested, battle-hardened parsing logic</li>
<li>Easy FFI integration from any language</li>
</ul>
<h3 id="for-tool-builders"><a class="header" href="#for-tool-builders">For Tool Builders</a></h3>
<ul>
<li>Analyze OpenMP code without a full compiler</li>
<li>Build linters, formatters, and code analyzers</li>
<li>Extract parallelization patterns from codebases</li>
</ul>
<h3 id="for-researchers"><a class="header" href="#for-researchers">For Researchers</a></h3>
<ul>
<li>Study directive usage patterns</li>
<li>Prototype new directive extensions</li>
<li>Educational tool for learning parallel programming</li>
</ul>
<hr />
<h2 id="quick-example-1"><a class="header" href="#quick-example-1">Quick Example</a></h2>
<h3 id="rust"><a class="header" href="#rust">Rust</a></h3>
<pre><code class="language-rust">use roup::parser::openmp;

let parser = openmp::parser();
let input = "#pragma omp parallel for num_threads(4) private(i)";
match parser.parse(input) {
    Ok((_, directive)) =&gt; {
        println!("Directive: {:?}", directive.kind);
        println!("Clauses: {}", directive.clauses.len());
    }
    Err(e) =&gt; eprintln!("Parse error: {:?}", e),
}</code></pre>
<h3 id="c"><a class="header" href="#c">C</a></h3>
<pre><code class="language-c">#include &lt;stdio.h&gt;

// Forward declarations
typedef struct OmpDirective OmpDirective;
extern OmpDirective* roup_parse(const char* input);
extern int32_t roup_directive_clause_count(const OmpDirective* dir);
extern void roup_directive_free(OmpDirective* dir);

int main() {
    OmpDirective* dir = roup_parse("#pragma omp parallel for num_threads(4)");
    if (dir) {
        printf("Clauses: %d\n", roup_directive_clause_count(dir));
        roup_directive_free(dir);
    }
    return 0;
}
</code></pre>
<h3 id="c-1"><a class="header" href="#c-1">C++</a></h3>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;memory&gt;

struct OmpDirective;
extern "C" {
    OmpDirective* roup_parse(const char* input);
    int32_t roup_directive_clause_count(const OmpDirective* dir);
    void roup_directive_free(OmpDirective* dir);
}

// RAII wrapper
class Directive {
    OmpDirective* ptr_;
public:
    explicit Directive(const char* input) : ptr_(roup_parse(input)) {}
    ~Directive() { if (ptr_) roup_directive_free(ptr_); }
    bool valid() const { return ptr_ != nullptr; }
    int clause_count() const { 
        return ptr_ ? roup_directive_clause_count(ptr_) : 0; 
    }
};

int main() {
    Directive dir("#pragma omp parallel for num_threads(4)");
    if (dir.valid()) {
        std::cout &lt;&lt; "Clauses: " &lt;&lt; dir.clause_count() &lt;&lt; "\n";
    }
    return 0;
}
</code></pre>
<hr />
<h2 id="architecture-1"><a class="header" href="#architecture-1">Architecture</a></h2>
<p>ROUP uses a clean, modular architecture:</p>
<pre><code class="language-text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Application Layer               â”‚
â”‚  (Your compiler/tool/analyzer)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚           â”‚           â”‚
      â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rust APIâ”‚ â”‚  C API  â”‚ â”‚ C++ API â”‚
â”‚         â”‚ â”‚         â”‚ â”‚ (RAII)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚           â”‚           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Core Parser   â”‚
         â”‚  (nom-based)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lexer  â”‚ â”‚Directiveâ”‚ â”‚ Clause  â”‚
â”‚         â”‚ â”‚ Parser  â”‚ â”‚ Parser  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>Key Design Principles:</strong></p>
<ul>
<li><strong>Safe by default</strong> - Rust's ownership system prevents memory errors</li>
<li><strong>Zero-copy parsing</strong> - Uses string slices, not allocations</li>
<li><strong>Minimal unsafe</strong> - FFI boundary only, well-documented</li>
<li><strong>Extensible</strong> - Easy to add new directives and clauses</li>
</ul>
<hr />
<h2 id="openmp-support"><a class="header" href="#openmp-support">OpenMP Support</a></h2>
<p>ROUP currently supports <strong>OpenMP 5.0+</strong> with comprehensive coverage:</p>
<h3 id="supported-directives-15"><a class="header" href="#supported-directives-15">Supported Directives (15+)</a></h3>
<ul>
<li><code>parallel</code> - Parallel regions</li>
<li><code>for</code> - Worksharing loops</li>
<li><code>sections</code>, <code>single</code> - Worksharing constructs</li>
<li><code>task</code>, <code>taskwait</code>, <code>taskgroup</code> - Tasking</li>
<li><code>target</code>, <code>teams</code>, <code>distribute</code> - Device offloading</li>
<li><code>barrier</code>, <code>critical</code>, <code>atomic</code> - Synchronization</li>
<li><code>metadirective</code> - Dynamic selection</li>
<li>And more...</li>
</ul>
<h3 id="supported-clauses-50"><a class="header" href="#supported-clauses-50">Supported Clauses (50+)</a></h3>
<ul>
<li><strong>Data sharing:</strong> <code>private</code>, <code>shared</code>, <code>firstprivate</code>, <code>lastprivate</code></li>
<li><strong>Parallelism control:</strong> <code>num_threads</code>, <code>if</code>, <code>proc_bind</code></li>
<li><strong>Worksharing:</strong> <code>schedule</code>, <code>collapse</code>, <code>nowait</code></li>
<li><strong>Reductions:</strong> <code>reduction</code> with 10+ operators (+, *, min, max, etc.)</li>
<li><strong>Device:</strong> <code>map</code>, <code>device</code>, <code>defaultmap</code></li>
<li><strong>Dependencies:</strong> <code>depend</code>, <code>in</code>, <code>out</code>, <code>inout</code></li>
<li>And more...</li>
</ul>
<p>See the <a href="https://github.com/ouankou/roup/blob/main/docs/OPENMP_SUPPORT.md">OpenMP Support Matrix</a> for the complete list.</p>
<hr />
<h2 id="safety-guarantees-1"><a class="header" href="#safety-guarantees-1">Safety Guarantees</a></h2>
<p>ROUP is built with safety as a core principle:</p>
<div class="table-wrapper"><table><thead><tr><th>Metric</th><th>Value</th><th>Notes</th></tr></thead><tbody>
<tr><td><strong>Safe Rust</strong></td><td>99.1%</td><td>All core logic is safe</td></tr>
<tr><td><strong>Unsafe blocks</strong></td><td>18</td><td>Only at FFI boundary</td></tr>
<tr><td><strong>Unsafe lines</strong></td><td>~60</td><td>Well-documented, NULL-checked</td></tr>
<tr><td><strong>Memory leaks</strong></td><td>0</td><td>Rust's RAII prevents leaks</td></tr>
<tr><td><strong>Segfaults</strong></td><td>0</td><td>Ownership system prevents use-after-free</td></tr>
</tbody></table>
</div>
<p>All <code>unsafe</code> code is:</p>
<ul>
<li><strong>Documented</strong> with safety requirements</li>
<li><strong>NULL-checked</strong> before dereferencing</li>
<li><strong>Isolated</strong> to <code>src/c_api.rs</code></li>
<li><strong>Tested</strong> with 355+ tests</li>
</ul>
<hr />
<h2 id="testing-1"><a class="header" href="#testing-1">Testing</a></h2>
<p>ROUP has comprehensive test coverage:</p>
<ul>
<li><strong>239 doc tests</strong> - Examples in documentation are auto-tested</li>
<li><strong>116 integration tests</strong> - Real-world usage scenarios</li>
<li><strong>355 total tests</strong> - All passing, zero warnings</li>
<li><strong>Cross-platform</strong> - Tested on Linux, macOS, Windows</li>
</ul>
<p>Test categories:</p>
<ul>
<li>âœ… Basic directives (parallel, for, task, teams, target)</li>
<li>âœ… Complex features (reductions, metadirectives, nesting)</li>
<li>âœ… Edge cases (comments, whitespace, error handling)</li>
<li>âœ… Roundtrip parsing (parse â†’ format â†’ parse)</li>
<li>âœ… FFI safety (C and C++ examples)</li>
</ul>
<hr />
<h2 id="getting-started-1"><a class="header" href="#getting-started-1">Getting Started</a></h2>
<p>Want to experiment with ROUP? Check out our tutorials:</p>
<ul>
<li><strong><a href="./cpp-tutorial.html">C++ Tutorial</a></strong> - Build an experimental application with C++17</li>
<li><strong><a href="./api-reference.html">Rust API Docs</a></strong> - Complete API reference</li>
</ul>
<p>Or jump straight to the code:</p>
<ul>
<li><a href="https://github.com/ouankou/roup">GitHub Repository</a></li>
<li><a href="https://github.com/ouankou/roup/blob/main/docs/QUICK_START.md">Quick Start Guide</a></li>
</ul>
<hr />
<h2 id="license-1"><a class="header" href="#license-1">License</a></h2>
<p>ROUP is open source under the <strong>MIT License</strong>.</p>
<p><strong>Copyright Â© 2024-2025 Anjia Wang</strong></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->

                            <a rel="next prefetch" href="getting-started.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

                    <a rel="next prefetch" href="getting-started.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
